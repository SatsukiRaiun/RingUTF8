# RingUTF8 - AI generated UTF-8 manipulation library for Ring programming language (No C extension).

## 警告
Ring 撤退前にバイブコーディングでGeminiに出力していただいたコードです。残念ながら検証と使用する前に当方の都合で保守や改良などは放棄されています。

このコードのテストはしていませんし、著作権は放棄しています (ライセンスは CC0 or NYSL)。なにか問題が起きようと一切責任は負いません。引き継ぎたいならご自由に。

以下、Gemini のログより引用
## 概要
Ringプログラミング言語は、標準ライブラリで提供される文字列操作機能を使用してUTF-8文字列を処理できます。特定の拡張機能（RingAllegro、RingQtなど）を使用しなくても、Ring言語の組み込み関数とバイト操作機能を用いてUTF-8文字列の文字数カウントや文字単位のアクセスなどの基本機能を実現するライブラリを作成することが可能です。 

* count_chars
* get_char
* print_chars
* sanitize_html
* decode_runes
* encode_runes
* map_runes
* string_to_array
* array_to_string
* byte_to_bits
* bits_to_byte
* string_to_bits
* bits_to_string

あくまで配列での処理での使用を前提としているため、UTF-8対応版の基本関数、編集距離や正規表現などについては実装していません。

## セキュリティに関する考慮事項
今回提供したutf8lib.ringは、Ring言語の標準機能のみを使用してUTF-8エンコーディングルールに従って動作するように設計されています。しかし、手動でのバイト操作には潜在的なリスクが伴います。 

1. 無効なUTF-8シーケンスの取り扱い:
* このライブラリは、無効なバイトシーケンスやオーバーロングエンコーディング（最短形式でないUTF-8表現）に遭遇した場合、それらをスキップするか、単なる1バイトとして処理する場合があります。これはサービス拒否（DoS）攻撃や、期待とは異なる方法で文字列が処理される原因となる可能性があります。
* 対策: 信頼できないソースからの入力文字列を処理する場合は、データの整合性をより厳密にチェックするバリデーション関数を別途実装することを推奨します。

1. サニタイズ機能の限界:
* 提供したsanitize_html関数は基本的なHTMLエスケープ処理のみを行います。最新のウェブセキュリティ（XSS対策など）には不十分です。
* 対策: セキュリティが重要なアプリケーションでは、信頼できる既知のライブラリ（もしRingの拡張機能で利用可能なものがあれば）を使用するか、コンテキストに応じたより厳密なサニタイズ・バリデーションルールを適用してください。

3. バイト/ビット操作の正確性:
* decode_runesやencode_runesにおけるビット演算はUTF-8の仕様に基づいています。実装ミスがあると、データ破損や予期しない挙動を引き起こす可能性があります。
* 対策: ユニットテストを用いて、多様なUTF-8文字列（特に4バイト文字や境界値）で徹底的にテストしてください。
